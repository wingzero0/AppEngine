<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<link type="text/css" rel="stylesheet" href="scripts/main.css" />
		<link type="text/css" rel="stylesheet" href="scripts/jquery-ui.css" />
		<script type="text/javascript" src="scripts/jquery-1.8.1.min.js"></script>
		<script type="text/javascript" src="scripts/jquery-ui-1.8.23.custom.min.js"></script>
		<script type="text/javascript" charset="utf-8">
			$(document).ready( function() {
					DrawPlan("TestPlan",10, 0);
					DrawPlan("SecondPlan",10, 0);
				});	
function BoxFadeIn(){
	alert("fade in");
}
function GetPlan(){
	$.get("GetPlan", {userPlans: 1}, function (xml){
			alert(xml);
			});
}

function NewPlan(){
	var postArray = new Array();
	postArray = {newPlan: $('[name=newPlan]').val() , planName: $('[name=planName]').val(), hour: $('[name=hour]').val(), comment: $('[name=comment]').val()};

	/*
	   $.post("MakePlan", postArray, function (json){
	   if (json["result"] == 1){
	   DrawPlan(postArray.planName );
	   DisplayPartialFrom();
	   }
	   }, "json");
	 */
	DrawPlan(postArray.planName, postArray.hour, 0);
}

function PlusHour(interval, sliderID){
	sliderId = "#" + sliderID;

	// get slider
	/*
	var targetSlider = $(sliderID).slider();
	var val = targetSlider.slider("value");
    */
	/*
	targetSlider.slider({value: val + interval });
	*/

	var val = $(sliderID).slider("value");
	$(sliderID).slider({value: val + interval});
	//console.log(targetSlider.slider("value"));
}

function DrawPlan(planName, totalTime, spendTime){

	var planTag = $("<div id='" + planName + "' class='planItem'></div>");
	var sliderTag = $("<div id='" + planName + "Slider' class='slider'></div>");
	var minusTag = $("<div class='minusEdit'><button onclick='PlusHour(-1, \"#" + planName + "Slider\")'>-</button></div>");
	var plusTag = $("<div class='plusEdit'><button onclick='PlusHour(1, \"#" + planName + "Slider\")'>+</button></div>");
	planTag.append(minusTag);
	planTag.append(sliderTag);
	planTag.append(plusTag);
	
	$("#dynamicSliderRegion").append( planTag );
	var newSlider = $( "#" + planName + "Slider" ).slider({ min: 0, max: totalTime, value: 1});
	
}

function DisplayWholeFrom(){
	$("#NewProject").html('<form name="NewProjectFrom" id="NewProjectFrom">\
			<input type="hidden" name="newPlan" value="1" />\
			<input id="NewProjectFocusText" type="text" value="" name="planName" size="10" class="wide" /><br />\
			Hour<input type="text" value="10" name="hour" size="4" />Hour<br />\
			Comment<input type="text" size="10" name="comment" class="wide">Comment<br />\
			<button type="button" onclick="NewPlan()">+</button>\
			</from>\
			'
			);
	var text_val = document.getElementById("NewProjectFocusText");
	text_val.focus();
}

function DisplayPartialFrom(){
	$("#NewProject").html(
			'<input type="text" value="Your new project" name="ProjectName" onclick="DisplayWholeFrom();"/>'
			);
}
</script>
	</head>
	<body>
		<div id="NewProject" class="blocktext">
			<input type="text" value="Your new project" name="ProjectName" onclick="DisplayWholeFrom();"/> hello world
		</div>
		<div class="demo">
			<div id="minusHour" class="minusEdit"></div>
			<div id="slider" class="slider"></div>
			<div id="plusHour" class="plusEdit"></div>
		</div>
		<div class="dynamicSliderRegion" id="dynamicSliderRegion">
		</div>
	</body>
</html>
